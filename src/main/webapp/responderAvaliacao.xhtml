<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>
<h:body>
	<f:view>
		<h:form>
			<p:growl id="msg" showDetail="false" />
			<p:panel id="panel" header="Avaliação - Alunos da Pós Graduação"
				style="text-align:center">
				<h:panelGrid style="text-align:left" columns="8" cellpadding="5">
					<p:outputLabel for="aluno" style="font-weight:bold" value="Aluno: " />
					<p:outputLabel id="aluno" value="#{respostaMBean.aluno}" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:outputLabel style="font-weight:bold" value="Matrícula:" />
					<p:outputLabel id="matricula" value="#{respostaMBean.matricula}" />
					<p:outputLabel style="font-weight:bold" value="Disciplina:" />
					<p:outputLabel id="Disciplina" value="#{respostaMBean.disciplina}" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:outputLabel style="font-weight:bold" value="Professor:" />
					<p:outputLabel id="professor" value="#{respostaMBean.professor}" />
					<p:outputLabel style="font-weight:bold" value="Status:" />
					<p:outputLabel value="Submetida"
						rendered="#{respostaMBean.finalizada}" />
					<p:outputLabel value="Aberta" rendered="#{respostaMBean.aberta}" />
					<p:outputLabel value="Expirada"
						rendered="#{respostaMBean.expirada}" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:spacer width="150" height="10" />
					<p:outputLabel style="font-weight:bold" value="Data final:" />
					<p:outputLabel id="dataFinal" value="#{respostaMBean.dataFinal}" />
				</h:panelGrid>
			</p:panel>
			<p:accordionPanel>
				<p:tab title="#{respostaMBean.categoria1}">
					<p:dataList value="#{respostaMBean.questoes1}" var="questao"
						type="definition">
						<p:growl id="msg1" showDetail="false" />
						<h:panelGrid columns="2" cellpadding="10">
                #{questao.texto}
                <p:rating value="#{questao.respostaInt}"
								readonly="#{!respostaMBean.aberta}">
								<p:ajax event="rate" listener="#{respostaMBean.onrate}"
									update="msg1" />
								<p:ajax event="cancel" listener="#{respostaMBean.oncancel}"
									update="msg1" />
							</p:rating>
						</h:panelGrid>
					</p:dataList>
				</p:tab>
				<p:tab title="#{respostaMBean.categoria2}">
					<p:dataList value="#{respostaMBean.questoes2}" var="questao"
						type="definition">
						<p:growl id="msg2" showDetail="false" />
						<h:panelGrid columns="2" cellpadding="10">
                #{questao.texto}
                <p:rating value="#{questao.respostaInt}"
								readonly="#{!respostaMBean.aberta}">
								<p:ajax event="rate" listener="#{respostaMBean.onrate}"
									update="msg2" />
								<p:ajax event="cancel" listener="#{respostaMBean.oncancel}"
									update="msg2" />
							</p:rating>
						</h:panelGrid>
					</p:dataList>
				</p:tab>
				<p:tab title="#{respostaMBean.categoria3}">
					<p:dataList value="#{respostaMBean.questoes3}" var="questao"
						type="definition">
						<p:growl id="msg3" showDetail="false" />
						<h:panelGrid columns="2" cellpadding="10">
                #{questao.texto}
                <p:rating value="#{questao.respostaInt}"
								readonly="#{!respostaMBean.aberta}">
								<p:ajax event="rate" listener="#{respostaMBean.onrate}"
									update="msg3" />
								<p:ajax event="cancel" listener="#{respostaMBean.oncancel}"
									update="msg3" />
							</p:rating>
						</h:panelGrid>
					</p:dataList>
				</p:tab>
				<p:tab title="Você tem comentários e sugestões?">
					<p:inputTextarea rows="10" cols="150" readonly="#{!respostaMBean.aberta}" value="#{respostaMBean.freeText}" />
				</p:tab>
			</p:accordionPanel>


			<br />

			<p:outputPanel style="width: 100%; text-align:center" layout="block">
				<p:commandButton value="Submeter" action="#{respostaMBean.submit}"
					update="@all" rendered="#{respostaMBean.aberta}">

					<p:confirm header="Confirmação"
						message="Não será possível alterar as respostas depois de enviá-las. Você deseja continuar?"
						icon="ui-icon-alert" />
				</p:commandButton>

				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
					<p:commandButton value="Sim" type="button"
						styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
					<p:commandButton value="Não" type="button"
						styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
				</p:confirmDialog>
			</p:outputPanel>

		</h:form>
	</f:view>
</h:body>
</html>